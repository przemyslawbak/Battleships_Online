<div class="gameHeaderPic col-sm rounded-top"></div>
<div class="row">
  <div class="col-md-5">
    <!--game status-->
    <div class="col-sm-12 gameStatus dataRow">
      <h2 class="login-title">Battle</h2>
      <div *ngIf="this.isStartAllowed; then playing; else waiting"></div>
      <ng-template #playing>
        <div class="row">
          <div class="col-sm-12">
            <div>Time remaining:</div>
            <div
              *ngIf="
                this.clientsPlayerNumber == this.whoseTurnNumber;
                then shoot;
                else takeHit
              "
            ></div>
            <ng-template #shoot>
              <h4 [ngClass]="this.count < 5 ? 'redColor' : 'greenColor'">
                {{ count }} s.
              </h4>
            </ng-template>
            <ng-template #takeHit>
              <h4>Opponent is shooting...</h4>
            </ng-template>
            <div>Players turn:</div>
            <h4>{{ this.whoseTurnName }}</h4>
            <div>Turn number:</div>
            <h4>{{ this.turnNo }}</h4>
          </div>
        </div>
      </ng-template>
      <ng-template #waiting>
        <div class="row">
          <div class="col-sm-12">
            Waiting for second player to join this game...
          </div>
        </div>
      </ng-template>
    </div>
    <!--game chat-->
    <div class="col-sm-12 gameChat">
      Game chat:
      <div class="chatDisplay">
        <div *ngFor="let message of this.chatMessages">
          <span *ngIf="this.userName == message.userName" class="greenColor"
            >{{ message.displayName }}:
          </span>
          <span *ngIf="this.userName != message.userName" class="redColor"
            >{{ message.displayName }}:
          </span>
          <span>{{ message.message }}</span>
        </div>
      </div>
      <div class="col-md-12 textInputRow">
        <input
          class="form-control chatInput"
          type="text"
          [(ngModel)]="chatMessage"
          (keyup.enter)="sendChatMessage()"
        />
        <button
          type="button"
          class="btn btn-md btn-success"
          (click)="sendChatMessage()"
        >
          Send
        </button>
      </div>
    </div>
  </div>
  <div class="droplist col-md-7">
    <!--buttons-->
    <div class="text-center">
      <button
        type="submit"
        class="btn btn-md btn-secondary"
        (click)="kickOpponent()"
      >
        Kick out opponent
      </button>
      <button
        type="submit"
        class="btn btn-md btn-success"
        (click)="randomShot()"
      >
        Random shot
      </button>
      <button type="submit" class="btn btn-md btn-danger" (click)="quitGame()">
        Quit game
      </button>
    </div>
    <!--board1-->
    <h4>{{ this.clientsName }}</h4>
    <div class="board text-center">
      <div
        class="boardRow"
        *ngFor="let row of this.boards[this.clientsPlayerNumber]; let i = index"
      >
        <div *ngFor="let box of row; let j = index">
          <div
            class="boardCell"
            [style.backgroundColor]="box.color"
            #cell
            (mouseleave)="resetBoardElement(cell, j, i)"
            (mouseover)="checkHoveredElement('cell', j, i, cell)"
            (click)="deployShip(j, i)"
          ></div>
        </div>
      </div>
    </div>
    <!--board2-->
    <h4>{{ this.opponentsName }}</h4>
    <div class="board text-center">
      <div
        class="boardRow"
        *ngFor="
          let row of this.boards[this.opponentsPlayerNumber];
          let i = index
        "
      >
        <div *ngFor="let box of row; let j = index">
          <div
            class="boardCell"
            [style.backgroundColor]="box.color"
            #cell
            (mouseleave)="resetBoardElement(cell, j, i)"
            (mouseover)="checkHoveredElement('cell', j, i, cell)"
            (click)="deployShip(j, i)"
          ></div>
        </div>
      </div>
    </div>
  </div>
</div>
