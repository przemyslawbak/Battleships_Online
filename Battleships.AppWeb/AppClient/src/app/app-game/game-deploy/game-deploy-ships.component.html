<div class="container">
  <div class="row">
    <div class="col-md-6">
      <div class="col-md-8 gameStatus dataRow">
        <div
          *ngIf="this.isDeploymentAllowed; then thenBlock; else elseBlock"
        ></div>
        <ng-template #thenBlock>
          <div class="row">
            <div class="col-sm-6">
              <div>Deploy ships:</div>
              <h4>{{ count }} s.</h4>
              <div>Available ships:</div>
              <h4>{{ this.fleetWaiting.length }}</h4>
            </div>
            <div class="ships col-sm-6">
              <div>(click to rotate)</div>
              <div
                class="droplist col-sm-6"
                #list
                (mouseover)="
                  hoveredElement(
                    list.getBoundingClientRect(),
                    'list',
                    -1,
                    -1,
                    list
                  )
                "
              >
                <div *ngIf="fleetWaiting.length > 0">
                  <div [style.size]="30 * fleetWaiting[0].size + 'px'">
                    <app-ship
                      #nextItem
                      [ngClass]="
                        fleetWaiting[0].rotation === 90 ? 'rotate' : 'rotateNot'
                      "
                      [size]="fleetWaiting[0].size"
                      (click)="setRotation(0 + '-fleetWaiting')"
                    ></app-ship>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
        <ng-template #elseBlock>
          <div class="row">
            <div class="col-sm-12">Waiting for second player to join...</div>
          </div>
        </ng-template>
      </div>
    </div>
    <div class="col-md-6 gameChat dataRow">
      <div class="chatDisplay">
        <div *ngFor="let message of this.chatMessages">
          <span *ngIf="this.userName == message.userName" class="greenColor"
            >{{ message.displayName }}:
          </span>
          <span *ngIf="this.userName != message.userName" class="redColor"
            >{{ message.displayName }}:
          </span>
          <span>{{ message.message }}</span>
        </div>
      </div>
      <div class="col-md-12 textInputRow">
        <input
          class="form-control chatInput"
          type="text"
          [(ngModel)]="chatMessage"
          (keyup.enter)="sendChatMessage()"
        />
        <button
          type="button"
          class="btn btn-md btn-success"
          (click)="sendChatMessage()"
        >
          Send
        </button>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <div class="droplist">
        <div *ngFor="let ship of this.fleetDeployed; let i = index">
          <app-ship
            id="{{ i }}"
            [ngClass]="ship.rotation === 90 ? 'rotate' : 'rotateNot'"
            [style.top.px]="ship.top"
            [style.left.px]="ship.left"
            [size]="ship.size"
          >
          </app-ship>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="droplist col-md-6">
      <div *ngFor="let ship of fleetDeployed; let i = index">
        <app-ship
          id="{{ i }}"
          [ngClass]="ship.rotation === 90 ? 'rotate' : 'rotateNot'"
          [style.top.px]="ship.top"
          [style.left.px]="ship.left"
          [size]="ship.size"
        >
        </app-ship>
      </div>
      <div class="board" #board>
        <div
          class="boardRow"
          *ngFor="let row of this.playersBoard; let i = index"
        >
          <div *ngFor="let box of row; let j = index" id="columns">
            <div
              class="boardCell"
              [style.backgroundColor]="box.color"
              #cell
              (mouseleave)="resetElement(cell)"
              (mouseover)="
                hoveredElement(cell.getBoundingClientRect(), 'cell', j, i, cell)
              "
              (click)="deployShip(j, i)"
            ></div>
          </div>
        </div>
      </div>
    </div>
    <div class="droplist col-md-6">something</div>
  </div>
</div>
